var ball = [];//用来存放小球  
var canvas = null;//用来存放canvas对象，方便后面方法调用  
var context2 = null;//用来存放context对象，方便后面方法调用  
  
window.onload=function(){  
    var myCanvas = document.getElementById("myCanvas");  
    if(myCanvas.getContext("2d")){  
        myCanvas.width = document.documentElement.clientWidth-20;  
        myCanvas.height = document.documentElement.clientHeight-20;  
          
        var context =myCanvas.getContext("2d");  
          
        canvas = myCanvas;  
        context2 = context;  
  
        //生成20个小球  
        var aBall=null;  
        for(var i=0;i<20;i++){  
            aBall={  
                x:Math.random()*myCanvas.width,  
                y:Math.random()*myCanvas.height,  
                r:Math.random()*50+10  
            }  
            ball[i]=aBall;//添加到数组中  
        }  
  
        //在canvas中绘制小球  
        drawBall(context);  
  
        //添加事件：mouseup  
        myCanvas.addEventListener("mouseup",detect);          
    }else{  
        return false;  
    }  
}  
  
//该方法用来绘制小球  
function drawBall(cxt){  
    for(var i=0;i<ball.length;i++){  
        cxt.beginPath();  
        cxt.arc(ball[i].x,ball[i].y,ball[i].r,0,Math.PI*2);  
  
        cxt.fillStyle="#058";  
        cxt.fill();  
        cxt.closePath();  
    }  
}  
  
//当鼠标点击小球时触发该事件  
function detect(event){  
    var x = event.clientX - canvas.getBoundingClientRect().left;  
    var y = event.clientY - canvas.getBoundingClientRect().top;  
      
    //每个小球都进行判断，判断(x,y)是否在其中  
    for(var i=0;i<ball.length;i++){  
        context2.beginPath();  
        context2.arc(ball[i].x,ball[i].y,ball[i].r,0,Math.PI*2);  
          
        //判断(x,y)是否在canvas绘制的路径中（绘制的每个图形算一个路径）  
        if(context2.isPointInPath(x,y)){  
            context2.fillStyle="red";  
            context2.fill();  
        }  
    }  
  
}  