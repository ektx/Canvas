<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>保存与恢复</title>
</head>

<body>
<p id="support"></p>
<canvas id="diagonal" style="border:1px solid #00F;" height="400" width="400"></canvas>
</body>
<script type="text/javascript">
//检测浏览器对canvas的支持情况
try {
	document.createElement("canvas").getContext("2d");
	document.getElementById("support").innerHTML = 
		"HTML5 Canvas is supported in your browser.";	
} catch (e) {
	document.getElementById("support").innerHTML =
		"HTML5 Canvas is not supported in your brower.";
}

var canvas = document.getElementById('diagonal');
var context = canvas.getContext('2d');

context.fillStyle = "rgb(255,0,0)";
// 边框为3px
context.lineWidth = 3;
// 边框色为深红
context.strokeStyle = "rgb(180,0,30)";
// 保存直充内容为红色绿色边框的状态
context.save();

// 路径与大小
context.strokeRect(50,50,100,100);
context.fillRect(50, 50, 100, 100);

context.fillStyle = "rgb(0, 0, 255)";
// 保存直充内容为蓝色的状态
context.save();
context.fillRect(80, 80, 100, 100);

// 恢复到上次保存状态，即蓝色状态
context.restore();
context.fillRect(100,100,100,100);

// 回到上一次的上一次保存状态，即红色状态，注意，上次的蓝色状态会删除
context.restore();
context.fillRect(130,130,100,100);

// translate 平移是将原点进行平移，
// 也就是说，以前是(0，0)的点现在在(50，50)了
context.translate(50,50);

// 已经到了最早的一次，所以还是红色
context.restore();
context.strokeRect(160,160,100,100);
context.fillRect(160,160,100,100);
</script>

</html>
