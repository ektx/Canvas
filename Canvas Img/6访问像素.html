<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>canvas 访问像素颜色</title>
	<script type="text/javascript" src="../js/jquery-2.0.3.min.js"></script>
	<script type="text/javascript">
	jQuery(document).ready(function($) {
		var canvas = $('#canvas');
		var context = canvas.get(0).getContext('2d');

		var _img = new Image();
		_img.src = '龙猫.jpg';

		$(_img).load(function() {
			context.drawImage(_img, 0, 0, 300, 300);
		});

		canvas.click(function(e) {
			var canvasOffset = canvas.offset();
			var canvasX = Math.floor(e.pageX - canvasOffset.left);
			var canvasY = Math.floor(e.pageY - canvasOffset.top);

			var imageData = context.getImageData(canvasX, canvasY, 1, 1);
			var pixel = imageData.data;
			var pixelColor = "rgba(" + pixel[0] + ", " + pixel[1] + ", " + pixel[2] + ", " + pixel[3] + ")";
			// 将值以16位方位显示组成hex
			var hexcolor = "#"+ pixel[0].toString(16) + pixel[1].toString(16) + pixel[2].toString(16);

			$('body').css("backgroundColor",pixelColor);
			$('.color').text(pixelColor);
			$('#color').text(hexcolor);

			// 如果背景色过深的话，让文字是白色
			if((pixel[0] < 70) || (pixel[1] < 70) || (pixel[2] < 70)) {
				$('body').css('color','#fff')
			} else {
				$('body').css('color','#000')
			}

		});
	});
	</script>
</head>
<body>
<div>
	<h3>访问像素颜色</h3>
	<p>RGB color:<span class="color"></span></p>
	<p>HEX color:<span id="color"></span></p>
	<canvas id="canvas" width="300" height="300">
		
	</canvas>
</div>
<!-- 色彩相关阅读 -->
<!-- http://zh.wikipedia.org/wiki/HSL%E5%92%8CHSV%E8%89%B2%E5%BD%A9%E7%A9%BA%E9%97%B4 -->
</body>
</html>